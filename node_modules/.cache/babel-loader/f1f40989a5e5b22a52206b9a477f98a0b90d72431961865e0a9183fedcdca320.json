{"ast":null,"code":"import'./App.css';import React from'react';import{BrowserRouter}from'react-router-dom';import NavbarComponent from'./components/appheader/navbar.js';import InputField from'./components/inputField/InputField.js';import HoliData from'./components/Holidata';import DateCardComponent from'./components/cardcomponent/date-card-component';import{getHolidaysFromDB,addHolidayToDB,deleteHolidayFromDB,updateYearlyRepeatingHolidays}from'./utils/indexedDB';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class MainPage extends React.Component{constructor(props){super(props);this.toggle=id=>{return()=>{const HoliData=this.state.HoliData.map(holiday=>{if(holiday.id===id){holiday.isOpen=!holiday.isOpen;}return holiday;});this.setState({HoliData});};};//reload the state of the cards\nthis.reloadCards=()=>{this.setState({HoliData:[...HoliData]});};// Add a new holiday to IndexedDB and state\nthis.addHoliday=async newHoliday=>{try{// Add to IndexedDB\nawait addHolidayToDB(newHoliday);// Update state\nthis.setState(prevState=>({customHolidays:[...prevState.customHolidays,newHoliday]}));console.log('Holiday added successfully:',newHoliday);}catch(error){console.error('Error adding holiday:',error);alert('Failed to add holiday. Please try again.');}};// Delete a custom holiday\nthis.deleteHoliday=async holidayId=>{try{// Remove from IndexedDB\nawait deleteHolidayFromDB(holidayId);// Update state\nthis.setState(prevState=>({customHolidays:prevState.customHolidays.filter(holiday=>holiday.id!==holidayId)}));console.log('Holiday deleted successfully:',holidayId);}catch(error){console.error('Error deleting holiday:',error);alert('Failed to delete holiday. Please try again.');}};// Get all holidays (built-in + custom)\nthis.getAllHolidays=()=>{return[...this.state.HoliData,...this.state.customHolidays];};this.state={HoliData:[...HoliData],// Create a copy to avoid mutating the original\ncustomHolidays:[],// Store custom holidays from IndexedDB\nisOpen:false,loading:true};}// Load custom holidays from IndexedDB when component mounts\nasync componentDidMount(){try{// Update yearly repeating holidays first\nawait updateYearlyRepeatingHolidays();// Then load all holidays\nconst customHolidays=await getHolidaysFromDB();this.setState({customHolidays,loading:false});}catch(error){console.error('Error loading custom holidays:',error);this.setState({loading:false});}}render(){if(this.state.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'50px'},children:/*#__PURE__*/_jsx(\"h2\",{children:\"Loading holidays...\"})})});}const allHolidays=this.getAllHolidays();return/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(NavbarComponent,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"main\",{className:\"app--screen\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"The Days Left Until...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"time-grid\",children:allHolidays.map(holiday=>{const isCustomHoliday=this.state.customHolidays.some(ch=>ch.id===holiday.id);return/*#__PURE__*/_jsx(DateCardComponent,{onClick:this.toggle(holiday.id),id:holiday.id,date:holiday.date,name:holiday.name,description:holiday.description,image:holiday.image,isCustom:isCustomHoliday,isYearlyRepeating:holiday.isYearlyRepeating,onDelete:isCustomHoliday?this.deleteHoliday:null},holiday.id);})})]}),/*#__PURE__*/_jsx(InputField,{HoliData:this.state.HoliData,isOpen:this.state.isOpen,reloadCards:this.reloadCards,addHoliday:this.addHoliday})]})]});}}export default MainPage;","map":{"version":3,"names":["React","BrowserRouter","NavbarComponent","InputField","HoliData","DateCardComponent","getHolidaysFromDB","addHolidayToDB","deleteHolidayFromDB","updateYearlyRepeatingHolidays","jsx","_jsx","jsxs","_jsxs","MainPage","Component","constructor","props","toggle","id","state","map","holiday","isOpen","setState","reloadCards","addHoliday","newHoliday","prevState","customHolidays","console","log","error","alert","deleteHoliday","holidayId","filter","getAllHolidays","loading","componentDidMount","render","className","children","style","textAlign","padding","allHolidays","isCustomHoliday","some","ch","onClick","date","name","description","image","isCustom","isYearlyRepeating","onDelete"],"sources":["/Users/jasonpottorff/Documents/GitHub/the-days-until-app/src/App.js"],"sourcesContent":["import './App.css';\nimport React from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport NavbarComponent from './components/appheader/navbar.js';\nimport InputField from './components/inputField/InputField.js';\nimport HoliData from './components/Holidata';\nimport DateCardComponent from './components/cardcomponent/date-card-component';\nimport { getHolidaysFromDB, addHolidayToDB, deleteHolidayFromDB, updateYearlyRepeatingHolidays } from './utils/indexedDB';\n\nclass MainPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      HoliData: [...HoliData], // Create a copy to avoid mutating the original\n      customHolidays: [], // Store custom holidays from IndexedDB\n      isOpen: false,\n      loading: true,\n    };\n  }\n\n  // Load custom holidays from IndexedDB when component mounts\n  async componentDidMount() {\n    try {\n      // Update yearly repeating holidays first\n      await updateYearlyRepeatingHolidays();\n\n      // Then load all holidays\n      const customHolidays = await getHolidaysFromDB();\n      this.setState({\n        customHolidays,\n        loading: false\n      });\n    } catch (error) {\n      console.error('Error loading custom holidays:', error);\n      this.setState({ loading: false });\n    }\n  }\n\n  toggle = (id) => {\n    return () => {\n      const HoliData = this.state.HoliData.map((holiday) => {\n        if (holiday.id === id) {\n          holiday.isOpen = !holiday.isOpen;\n        }\n        return holiday;\n      });\n      this.setState({ HoliData });\n    };\n  };\n\n  //reload the state of the cards\n  reloadCards = () => {\n    this.setState({ HoliData: [...HoliData] });\n  };\n\n  // Add a new holiday to IndexedDB and state\n  addHoliday = async (newHoliday) => {\n    try {\n      // Add to IndexedDB\n      await addHolidayToDB(newHoliday);\n\n      // Update state\n      this.setState(prevState => ({\n        customHolidays: [...prevState.customHolidays, newHoliday]\n      }));\n\n      console.log('Holiday added successfully:', newHoliday);\n    } catch (error) {\n      console.error('Error adding holiday:', error);\n      alert('Failed to add holiday. Please try again.');\n    }\n  };\n\n  // Delete a custom holiday\n  deleteHoliday = async (holidayId) => {\n    try {\n      // Remove from IndexedDB\n      await deleteHolidayFromDB(holidayId);\n\n      // Update state\n      this.setState(prevState => ({\n        customHolidays: prevState.customHolidays.filter(holiday => holiday.id !== holidayId)\n      }));\n\n      console.log('Holiday deleted successfully:', holidayId);\n    } catch (error) {\n      console.error('Error deleting holiday:', error);\n      alert('Failed to delete holiday. Please try again.');\n    }\n  };\n\n  // Get all holidays (built-in + custom)\n  getAllHolidays = () => {\n    return [...this.state.HoliData, ...this.state.customHolidays];\n  };\n\n  render() {\n    if (this.state.loading) {\n      return (\n        <div className='App'>\n          <div style={{ textAlign: 'center', padding: '50px' }}>\n            <h2>Loading holidays...</h2>\n          </div>\n        </div>\n      );\n    }\n\n    const allHolidays = this.getAllHolidays();\n\n    return (\n      <BrowserRouter>\n        <NavbarComponent></NavbarComponent>\n        <div className='App'>\n          <main className='app--screen'>\n            <header className='App-header'>\n              <h1>The Days Left Until...</h1>\n            </header>\n\n            <div className='time-grid'>\n              {allHolidays.map((holiday) => {\n                const isCustomHoliday = this.state.customHolidays.some(ch => ch.id === holiday.id);\n                return (\n                  <DateCardComponent\n                    onClick={this.toggle(holiday.id)}\n                    key={holiday.id}\n                    id={holiday.id}\n                    date={holiday.date}\n                    name={holiday.name}\n                    description={holiday.description}\n                    image={holiday.image}\n                    isCustom={isCustomHoliday}\n                    isYearlyRepeating={holiday.isYearlyRepeating}\n                    onDelete={isCustomHoliday ? this.deleteHoliday : null}\n                  />\n                );\n              })}\n            </div>\n          </main>\n          <InputField\n            HoliData={this.state.HoliData}\n            isOpen={this.state.isOpen}\n            reloadCards={this.reloadCards}\n            addHoliday={this.addHoliday}\n          ></InputField>\n        </div>\n      </BrowserRouter>\n    );\n  }\n}\n\nexport default MainPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}